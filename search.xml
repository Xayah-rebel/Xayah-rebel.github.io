<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Tengine安装配置</title>
      <link href="2021/03/28/tengine/"/>
      <url>2021/03/28/tengine/</url>
      
        <content type="html"><![CDATA[<h2 id="Tengine安装配置说明"><a href="#Tengine安装配置说明" class="headerlink" title="Tengine安装配置说明"></a>Tengine安装配置说明</h2><p>安装环境：CentOS Linux 6（最新版CentOS6.10），CentOS Linux 7 8系列未测试</p><p>版本：适用tengine2.2.*系列（最新版tengine2.2.3），tengine2.3.*系列有不同</p><h3 id="一、安装配置Tengine"><a href="#一、安装配置Tengine" class="headerlink" title="一、安装配置Tengine"></a>一、安装配置Tengine</h3><h4 id="1、下载Tengine安装包"><a href="#1、下载Tengine安装包" class="headerlink" title="1、下载Tengine安装包"></a>1、下载Tengine安装包</h4><pre><code>wget http://tengine.taobao.org/download/tengine-2.2.3.tar.gz</code></pre><h4 id="2、解压缩"><a href="#2、解压缩" class="headerlink" title="2、解压缩"></a>2、解压缩</h4><pre><code>tar zxvf tengine-2.2.3.tar.gz</code></pre><h4 id="3、安装所缺少的依赖包"><a href="#3、安装所缺少的依赖包" class="headerlink" title="3、安装所缺少的依赖包"></a>3、安装所缺少的依赖包</h4><pre><code>yum -y install gcc openssl openssl-devel pcre pcre-devel zlib zlib-devel</code></pre><h4 id="4、进入解压出来的文件夹“Tengine-2-2-3”，执行如下命令："><a href="#4、进入解压出来的文件夹“Tengine-2-2-3”，执行如下命令：" class="headerlink" title="4、进入解压出来的文件夹“Tengine-2.2.3”，执行如下命令："></a>4、进入解压出来的文件夹“Tengine-2.2.3”，执行如下命令：</h4><pre><code>./configure</code></pre><p>如需IPV6支持则执行：</p><p>（ –with-ipv6必须加，让nginx开启IPV6支持配置）</p><pre><code>./configure --prefix=/usr/local/nginx --with-ipv6</code></pre><h4 id="5、configure成功之后，执行命令："><a href="#5、configure成功之后，执行命令：" class="headerlink" title="5、configure成功之后，执行命令："></a>5、configure成功之后，执行命令：</h4><pre><code>make</code></pre><h4 id="6、运行安装命令："><a href="#6、运行安装命令：" class="headerlink" title="6、运行安装命令："></a>6、运行安装命令：</h4><pre><code>make install</code></pre><h4 id="7、默认安装路径为-usr-local-nginx"><a href="#7、默认安装路径为-usr-local-nginx" class="headerlink" title="7、默认安装路径为: /usr/local/nginx"></a>7、默认安装路径为: /usr/local/nginx</h4><h4 id="8、修改配置Tengine"><a href="#8、修改配置Tengine" class="headerlink" title="8、修改配置Tengine"></a>8、修改配置Tengine</h4><h5 id="8-1修改nginx配置文件-usr-local-nginx-conf-nginx-conf，增加语句"><a href="#8-1修改nginx配置文件-usr-local-nginx-conf-nginx-conf，增加语句" class="headerlink" title="8.1修改nginx配置文件/usr/local/nginx/conf/nginx.conf，增加语句"></a>8.1修改nginx配置文件/usr/local/nginx/conf/nginx.conf，增加语句</h5><p>client_max_body_size 100m; #客户端上传文件大小子限制</p><p>server_names_hash_bucket_size 128; #服务器名称长度限制</p><p>修改最大连接数（Web服务器性能不足时，可用第2个图设置，减少一下转发速度）  </p><pre><code>vim /usr/local/nginx/conf/nginx.conf</code></pre><h5 id="8-2修改Linux系统最大打开文件数-每次linux登陆需重新设置"><a href="#8-2修改Linux系统最大打开文件数-每次linux登陆需重新设置" class="headerlink" title="8.2修改Linux系统最大打开文件数(每次linux登陆需重新设置)"></a>8.2修改Linux系统最大打开文件数(每次linux登陆需重新设置)</h5><pre><code>ulimit -n 102400ulimit -s unlimitedulimit -a</code></pre><p>ulimit -n 102400   //ulimit -a 查看当前限制数</p><p>ulimit -s unlimited   //ulimit -a 查看当前限制数</p><h5 id="8-3修改nginx配置文件-usr-local-nginx-conf-nginx-conf，增加一条语句"><a href="#8-3修改nginx配置文件-usr-local-nginx-conf-nginx-conf，增加一条语句" class="headerlink" title="8.3修改nginx配置文件/usr/local/nginx/conf/nginx.conf，增加一条语句"></a>8.3修改nginx配置文件/usr/local/nginx/conf/nginx.conf，增加一条语句</h5><pre><code>include /usr/local/nginx/conf/other/*.conf</code></pre><h5 id="8-4建立other目录"><a href="#8-4建立other目录" class="headerlink" title="8.4建立other目录"></a>8.4建立other目录</h5><pre><code>mkdir /usr/local/nginx/conf/other</code></pre><p>//////在other目录中添加网站反向代理配置文件 xxx.henau.edu.cn.conf////  </p><h4 id="9、添加自动启动"><a href="#9、添加自动启动" class="headerlink" title="9、添加自动启动"></a>9、添加自动启动</h4><p># vim /etc/rc.d/rc.local</p><p>增加 /usr/local/nginx/sbin/nginx -s start</p><p>停止或关闭Nginx：/usr/local/nginx/sbin/nginx -s stop</p><p>正常停止或关闭Nginx：/usr/local/nginx/sbin/nginx -s quit</p><p>配置文件修改重装载命令：/usr/local/nginx/sbin/nginx -s reload</p><h3 id="二、隐藏Tengine版本信息"><a href="#二、隐藏Tengine版本信息" class="headerlink" title="二、隐藏Tengine版本信息"></a>二、隐藏Tengine版本信息</h3><h4 id="1、Http中的版本信息"><a href="#1、Http中的版本信息" class="headerlink" title="1、Http中的版本信息"></a>1、Http中的版本信息</h4><p>修改/usr/local/nginx/conf/nginx.conf，设置隐藏版本号:</p><pre><code>server_tag off;server_info off; server_tokens off;</code></pre><h4 id="2、PHP中的Nginx版本信息"><a href="#2、PHP中的Nginx版本信息" class="headerlink" title="2、PHP中的Nginx版本信息"></a>2、PHP中的Nginx版本信息</h4><p>修改/usr/local/nginx/conf/ fastcgi.conf，注释掉nginx版本行</p><h4 id="3、50x错误信息"><a href="#3、50x错误信息" class="headerlink" title="3、50x错误信息"></a>3、50x错误信息</h4><p>修改/usr/local/nginx/html/50x.html和index.html两个文件，删除包含版本信息内容。  </p><h4 id="4、404错误信息"><a href="#4、404错误信息" class="headerlink" title="4、404错误信息"></a>4、404错误信息</h4><p>在/usr/local/nginx/html/目录建立404.html</p><h3 id="三、修改防火墙"><a href="#三、修改防火墙" class="headerlink" title="三、修改防火墙"></a>三、修改防火墙</h3><p>修改防火墙。开放80、443等端口：</p><pre><code>vim /etc/sysconfig/iptables</code></pre><p>全部修改完之后重启iptables：</p><pre><code>service iptables restart</code></pre><p>或者关闭防火墙：(注意中间的是两个英式小短线;重启)  </p><pre><code>chkconfig --level 35 iptables off</code></pre><p>其他相关命令：</p><p>chkconfig iptables off  （设置开机不启动ipv4防火墙）</p><p>chkconfig iptables on  （设置开机启动ipv4防火墙）</p><p>service iptables start  （启动iptables服务）</p><p>service iptables stop  （关闭iptables服务）</p><p>service iptables status （查看iptables服务状态）</p><pre><code>chkconfig iptables offchkconfig iptables onservice iptables startservice iptables stopservice iptables status</code></pre><p>修改IPV6防火墙（如果支持），开放80、8080等端口</p><pre><code>vim /etc/sysconfig/ip6tables</code></pre><p>重启ip6tables服务：</p><pre><code>service ip6tables restart</code></pre><p>其他相关命令：</p><p>chkconfig ip6tables off  （设置开机不启动ipv6防火墙）</p><p>chkconfig ip6tables on  （设置开机启动ipv6防火墙）</p><p>service ip6tables start  （启动ip6tables服务）</p><p>service ip6tables stop  （关闭ip6tables服务）</p><p>service ip6tables status （查看ip6tables服务状态）</p><pre><code>chkconfig ip6tables offchkconfig ip6tables onservice ip6tables startservice ip6tables stopservice ip6tables status</code></pre>]]></content>
      
      
      <categories>
          
          <category> Tengine </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LAMP环境搭建</title>
      <link href="2021/03/28/lamp/"/>
      <url>2021/03/28/lamp/</url>
      
        <content type="html"><![CDATA[<h1 id="Linux环境安装教程"><a href="#Linux环境安装教程" class="headerlink" title="Linux环境安装教程"></a>Linux环境安装教程</h1><h2 id="一、系统约定"><a href="#一、系统约定" class="headerlink" title="一、系统约定"></a>一、系统约定</h2><p>操作系统采用CentOS 6.5，使用CentOS自身提供的Apache、PHP、MySQL搭建LAMP服务器。Apache 2.2.15<br>php 5.3.3<br>mysql 5.1.73</p><h2 id="二、系统环境部署及调整"><a href="#二、系统环境部署及调整" class="headerlink" title="二、系统环境部署及调整"></a>二、系统环境部署及调整</h2><h3 id="1、检查系统是否正常"><a href="#1、检查系统是否正常" class="headerlink" title="1、检查系统是否正常"></a>1、检查系统是否正常</h3><p>（检查有无系统级错误信息） </p><pre><code>more /var/log/messages</code></pre><p>（检查硬件设备是否有错误信息）</p><pre><code>dmesg</code></pre><p> （检查网卡设置是否正确）</p><pre><code>ifconfig</code></pre><p>ping <a href="http://www.163.com(检查网络是否正常)/">www.163.com（检查网络是否正常）</a></p><h3 id="2、关闭不需要的服务"><a href="#2、关闭不需要的服务" class="headerlink" title="2、关闭不需要的服务"></a>2、关闭不需要的服务</h3><p>ntsysv 以下仅列出需要启动的服务，未列出的服务一律推荐关闭：</p><pre><code>atd crond haldaemon httpd iptables irqbalance mysqld network postfix rsyslog sshd</code></pre><h3 id="3、重新启动系统"><a href="#3、重新启动系统" class="headerlink" title="3、重新启动系统"></a>3、重新启动系统</h3><pre><code>init 6 </code></pre><h3 id="4、使用-yum-程序安装所需开发包（以下为标准的-RPM-包名称）"><a href="#4、使用-yum-程序安装所需开发包（以下为标准的-RPM-包名称）" class="headerlink" title="4、使用 yum 程序安装所需开发包（以下为标准的 RPM 包名称）"></a>4、使用 yum 程序安装所需开发包（以下为标准的 RPM 包名称）</h3><pre><code>yum install gd gd-devel php-gd libxml2 libmcrypt cronolog ntp vim-enhanced gcc gcc-c++ gcc-g77 flex bison autoconf automake bzip2-devel ncurses-devel libjpeg-devel libpng-devel libtiff-devel freetype-devel pam-devel</code></pre><h2 id="三、安装配置L-A-M-P环境"><a href="#三、安装配置L-A-M-P环境" class="headerlink" title="三、安装配置L.A.M.P环境"></a>三、安装配置L.A.M.P环境</h2><h3 id="1、检查LAMP所需软件：httpd-mysql-mysql-server-php-php-devel-php-mysql，如果没有则使用yum安装。"><a href="#1、检查LAMP所需软件：httpd-mysql-mysql-server-php-php-devel-php-mysql，如果没有则使用yum安装。" class="headerlink" title="1、检查LAMP所需软件：httpd mysql mysql-server php php-devel php-mysql，如果没有则使用yum安装。"></a>1、检查LAMP所需软件：httpd mysql mysql-server php php-devel php-mysql，如果没有则使用yum安装。</h3><pre><code>yum install httpd mysql mysql-server php php-mysql</code></pre><h3 id="2、配置Apache"><a href="#2、配置Apache" class="headerlink" title="2、配置Apache"></a>2、配置Apache</h3><pre><code>vim /etc/httpd/conf/httpd.conf</code></pre><p>​    KeepAlive On                     &lt;==将默认的Off改为On    76行左右<br>​    MaxKeepAliveRequests 500         &lt;==将默认的100改为500以上    83行左右<br>​    Listen 80                        &lt;==监听端口80，可自己修改  136行左右<br>​    DocumentRoot “/var/www/html”     &lt;==默认根目录   292行左右<br>​    Alias /icons/ “/var/www/icons/“  &lt;==虚拟目录     551行左右</p><p>​    DirectoryIndex index.html index.html.var index.htm index.php &lt;==默认首页  402行左右</p><p>找到 AddDefaultCharset UTF-8     &lt;==将其注释掉    747行左右</p><p>找到： AddType application/x-gzip .gz .tgz<br>在该行下面添加 AddType application/x-httpd-php .php      781行左右</p><p>找到<br>&lt;Directory “/var/www/html”&gt;<br>Options Indexes FollowSymLinks    &lt;==将Indexs删除掉  331行左右</p><h3 id="3、配置PHP"><a href="#3、配置PHP" class="headerlink" title="3、配置PHP"></a>3、配置PHP</h3><pre><code>vim /etc/httpd/conf.d/php.confvim /etc/php.ini</code></pre><p>​    post_max_size = 8M         &lt;==修改上传容量限制    729行左右<br>​    file_uploads = On          &lt;==允许上传            869行左右<br>​    upload_max_filesize = 2M   &lt;==修改上传容量限制    878行左右<br>​    memory_limit = 128M        &lt;==修改php内存限制     457行左右</p><h3 id="4、测试apache和php"><a href="#4、测试apache和php" class="headerlink" title="4、测试apache和php"></a>4、测试apache和php</h3><pre><code>/etc/init.d/httpd start /etc/init.d/httpd configtestchkconfig httpd on</code></pre><p>/etc/init.d/httpd start            &lt;==立即启动</p><p>/etc/init.d/httpd configtest       &lt;==测试配置文件语法</p><p>chkconfig httpd on                 &lt;==开机启动www</p><p>另一种启动方式</p><pre><code>/usr/sbin/apachectl start/usr/sbin/apachectl stop</code></pre><p>查看是否启动</p><pre><code>netstat -tulnp | grep 'httpd'</code></pre><p>测试php<br>在/var/www/html目录下建立一个phpinfo.php文件</p><pre><code>vim /var/www/html/phpinfo.php</code></pre><pre><code>&lt;?php phpinfo(); ?&gt;</code></pre><h3 id="5、配置MySQL"><a href="#5、配置MySQL" class="headerlink" title="5、配置MySQL"></a>5、配置MySQL</h3><p>启动服务</p><pre><code>/etc/init.d/mysqld startchkconfig mysqld on</code></pre><p>测试服务</p><pre><code>netstat -tulnp | grep 'mysql'mysql -u root</code></pre><p>设置密码</p><pre><code>mysqladmin -u root password 'yourpassword'mysql -u root -p    Enter password:</code></pre><p>调优</p><pre><code>vim /etc/my.cnf</code></pre><p>​    MySQL数据目录<br>​    datadir=/var/lib/mysql</p><h3 id="6、配置防火墙"><a href="#6、配置防火墙" class="headerlink" title="6、配置防火墙"></a>6、配置防火墙</h3><pre><code>/sbin/iptables -I INPUT -p tcp --dport 80 -j ACCEPT/etc/rc.d/init.d/iptables save/etc/init.d/iptables status/etc/init.d/iptables restart/etc/init.d/iptables stop chkconfig --level 35 iptables off vim /etc/sysconfig/iptables</code></pre><p>/sbin/iptables -I INPUT -p tcp –dport 80 -j ACCEPT    &lt;==开放80端口</p><p>/etc/rc.d/init.d/iptables save                         &lt;==保存防火墙配置</p><p>/etc/init.d/iptables status     &lt;==查看防火墙服务状态</p><p>/etc/init.d/iptables restart     &lt;==重启防火墙服务</p><p>/etc/init.d/iptables stop              &lt;==本次关闭防火墙服务</p><p>chkconfig –level 35 iptables off     &lt;==永久性关闭防火墙服务</p><p>vim /etc/sysconfig/iptables     &lt;==设置或查看防火墙配置文件</p><p>=========================================================================</p><h2 id="四、linux，apache，php，mysql常用的查看版本信息的方法"><a href="#四、linux，apache，php，mysql常用的查看版本信息的方法" class="headerlink" title="四、linux，apache，php，mysql常用的查看版本信息的方法"></a>四、linux，apache，php，mysql常用的查看版本信息的方法</h2><h3 id="1、查看linux版本"><a href="#1、查看linux版本" class="headerlink" title="1、查看linux版本"></a>1、查看linux版本</h3><pre><code>lsb_release -a</code></pre><p>[root@gzc /]# lsb_release -a<br>LSB Version:    :base-4.0-amd64:base-4.0-noarch:core-4.0-amd64:core-4.0-noarch:graphics-4.0-amd64:graphics-4.0-noarch:printing-4.0-amd64:printing-4.0-noarch<br>Distributor ID:    CentOS<br>Description:    CentOS release 6.5 (Final)<br>Release:    6.5<br>Codename:    Final</p><h3 id="2、查看apache版本"><a href="#2、查看apache版本" class="headerlink" title="2、查看apache版本"></a>2、查看apache版本</h3><pre><code>httpd -vrpm -qa |grep httpd</code></pre><p>[root@gzc /]# httpd -v<br>Server version: Apache/2.2.15 (Unix)</p><p>[root@gzc /]# rpm -qa |grep httpd<br>httpd-2.2.15-31.el6.centos.x86_64<br>httpd-tools-2.2.15-31.el6.centos.x86_64</p><h3 id="3、查看php版本"><a href="#3、查看php版本" class="headerlink" title="3、查看php版本"></a>3、查看php版本</h3><pre><code>php -vrpm -qa | grep php</code></pre><p>[root@gzc /]# php -v<br>PHP 5.3.3 (cli) (built: Aug  6 2014 05:54:27)<br>Copyright (c) 1997-2010 The PHP Group<br>Zend Engine v2.3.0, Copyright (c) 1998-2010 Zend Technologies</p><p>[root@gzc /]# rpm -qa | grep php<br>php-5.3.3-27.el6_5.1.x86_64<br>php-common-5.3.3-27.el6_5.1.x86_64<br>php-cli-5.3.3-27.el6_5.1.x86_64<br>php-devel-5.3.3-27.el6_5.1.x86_64<br>php-gd-5.3.3-27.el6_5.1.x86_64<br>php-pdo-5.3.3-27.el6_5.1.x86_64<br>php-mysql-5.3.3-27.el6_5.1.x86_64</p><h3 id="4、查看mysql版本"><a href="#4、查看mysql版本" class="headerlink" title="4、查看mysql版本"></a>4、查看mysql版本</h3><pre><code>mysql -Vrpm -qa |grep mysql</code></pre><p>[root@gzc /]# mysql -V<br>mysql  Ver 14.14 Distrib 5.1.73, for redhat-linux-gnu (x86_64) using readline 5.1</p><p>[root@gzc /]# rpm -qa |grep mysql<br>mysql-libs-5.1.73-3.el6_5.x86_64<br>mysql-server-5.1.73-3.el6_5.x86_64<br>mysql-5.1.73-3.el6_5.x86_64<br>php-mysql-5.3.3-27.el6_5.1.x86_64</p><p>=========================================================================</p>]]></content>
      
      
      <categories>
          
          <category> 服务器学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
